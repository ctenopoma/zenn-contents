---
title: "pythonã§æœ€é€Ÿã§GUIã‚’ä½œã‚‹(å°å…¥)"
emoji: "ğŸ“š"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["flet", "python", "GUI"]
published: false
---

## ç›®çš„

ä»Šå›ã®ç›®çš„ã¯ã€**pythonã§æœ€é€Ÿã§GUIç’°å¢ƒã‚’æ§‹ç¯‰ã™ã‚‹**ã“ã¨ã€‚
æƒ³å®šã™ã‚‹ä½¿ã„æ–¹ã¯ä»¥ä¸‹ã®ï¼’ã¤ã€‚

- **åˆ†æã—ãŸãƒ‡ãƒ¼ã‚¿ã‚’è¡¨ç¤ºã™ã‚‹ãŸã‚ã®GUI**
  â†’ã€€è¤‡æ•°ã®æ™‚ç³»åˆ—ãƒ‡ãƒ¼ã‚¿ã‚’æ™‚é–“ã‚’æ¨ç§»ã•ã›ãªãŒã‚‰å„æ™‚åˆ»ã§ã®çŠ¶æ…‹ã‚’è¡¨ç¤ºã—ãŸã„ã€‚ä¾‹ãˆã°ç§»å‹•ã™ã‚‹ç‰©ä½“ã®ä½ç½®ã€å‘ãã€é€Ÿåº¦ãªã©ã‚’çµµã¨ã‚°ãƒ©ãƒ•ã§åˆ†ã‹ã‚Šã‚„ã™ãã€æ™‚é–“ã‚’æ“ä½œã—ãªãŒã‚‰ã€‚

- **pythonãƒ—ãƒ­ã‚°ãƒ©ãƒ ã§é–‹ç™ºã—ãŸã‚¢ãƒ—ãƒªã®å®Ÿè¡Œç”»é¢ã¨ã—ã¦ã®GUI**
  â†’ã€€pythonã§é–‹ç™ºã—ãŸã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’éãƒ—ãƒ­ã‚°ãƒ©ãƒã«é…å¸ƒã™ã‚‹ã¨ãã¯ã€å®Ÿè¡Œç’°å¢ƒã‚’åŸ‹ã‚è¾¼ã‚“ã§Batã§å®Ÿè¡Œã—ã¦ã‚‚ã‚‰ã£ã¦ã„ã‚‹ãŒã€GUIãŒã‚ã£ãŸã»ã†ãŒæ°å¥½ãŒè‰¯ã„ï¼†æ“ä½œæ€§UP

c#ã‚„javascriptsã§é–‹ç™ºã™ã‚‹ã®ãŒè‰¯ã„ã®ã¯åˆ†ã‹ã‚‹ãŒã€ã„ã‹ã‚“ã›ã‚“å­¦ç¿’ã‚³ã‚¹ãƒˆãŒã‹ã‹ã‚‹ã€‚javascriptsã«æ‰‹ã‚’å‡ºã—ã¦æŒ«æŠ˜ã™ã‚‹ã“ã¨æ•°å›ã€ä¸€å‘ã«GUIã‚’ãƒ‘ãƒ‘ã£ã¨ä½œã‚‹ãƒ¬ãƒ™ãƒ«ã«ã¯åˆ°é”ã—ã¾ã›ã‚“ã§ã—ãŸã€‚

ãã“ã§ã€pythonã§**ã‚ã‚‹ç¨‹åº¦ã®GUI**ã‚’ã±ã±ã£ã¨ã€**æœ€é€Ÿ**ã§ã€**å­¦ç¿’ã‚³ã‚¹ãƒˆæœ€å°**ã§é–‹ç™ºã™ã‚‹æ–¹æ³•ã‚’å‹‰å¼·ã—ã¦ã¿ãŸã„ã¨æ€ã„ã¾ã™ã€‚

## ç’°å¢ƒ

ä»Šå›ã¯GUIé–‹ç™ºãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¨ã—ã¦**Flet**ã‚’ä½¿ç”¨ã™ã‚‹ã€‚
ç†ç”±ã¯ã€ã¨ã«ã‹ãpythonãƒ¦ãƒ¼ã‚¶ã«ã¨ã£ã¤ãã‚„ã™ã„è¨˜æ³•ã§ã‚ã£ãŸãŸã‚ã€‚
plotlyã§ã‚‚è‰¯ã„ã‘ã©ã€ã‚ã‚Œã¯ã‚ã‚Œã§è¦šãˆã‚‹ã“ã¨ãŒå¤šãã¦ã€ãã®å‰²ã«æ“ä½œæ€§ãŒè‰¯ããªã„æ°—ãŒã—ã¦ä¸æ¡ç”¨ã€‚

https://flet.dev/

ç°¡å˜ã«å®Ÿè¡Œç’°å¢ƒã‚’ä»¥ä¸‹ã«è¨˜è¼‰ã€‚

- python: 3.10-64
- flet: 0.17.0

## è¦ä»¶å®šç¾©

å°å…¥ã™ã‚‹ãŸã‚ã®ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã¨ã—ã¦ã€ä»¥ä¸‹ã®ï¼’ã¤ã®è¦ä»¶ã‚’æº€ãŸã™GUIã‚’ä½œæˆã—ã¦ã¿ã¾ã™ã€‚

1. è¤‡æ•°ã®æ™‚ç³»åˆ—ãƒ‡ãƒ¼ã‚¿ã«ã¤ã„ã¦ã€å„æ™‚åˆ»ã«ãŠã‘ã‚‹çŠ¶æ…‹ãŒè¡¨ç¤ºã§ãã‚‹ã“ã¨ã€‚
2. ä¸Šè¨˜ã®å„æ™‚åˆ»ã‚’ãƒãƒ¼ã§åˆ¶å¾¡ã§ãã‚‹ã“ã¨

## é–‹ç™º

### ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«

fletã®ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã‚’å®Ÿè¡Œã€‚

``` code: flet_tutorial.py
    import flet as ft

    def main(page: ft.Page):
        t = ft.Text(value="Hello, world!", color="green")
        page.controls.append(t)
        page.update()

    ft.app(target=main)
```

![](/img/flet_tutorial/image.png)

### æ™‚ç³»åˆ—ãƒ‡ãƒ¼ã‚¿ã®ã‚°ãƒ©ãƒ•è¡¨ç¤º

ä¾‹é¡Œã¨ã—ã¦ã€çµŒè·¯è¿½å¾“ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã«ãŠã‘ã‚‹è»Šä¸¡ã®ä½ç½®ã¨ã€å‚ç…§ç‚¹ã‚’ç¤ºã™æ™‚ç³»åˆ—ãƒ‡ãƒ¼ã‚¿ã‚’æç”»ã™ã‚‹æ–¹æ³•ã‚’è€ƒãˆã¾ã™ã€‚

ã¾ãšã¯ã€ã™ã¹ã¦ã®æ™‚é–“å¸¯ã‚’è¡¨ç¤ºã™ã‚‹ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’ä½œæˆã—ã¾ã—ãŸã€‚

``` code: flet_tutorial.py
    import numpy as np
    import math
    import matplotlib.pyplot as plt
    import pandas as pd
    from flet.matplotlib_chart import MatplotlibChart

    def main(page: ft.Page):

        fig = plt.figure()
        ax = fig.add_subplot(111)
        path_plot(ax)

        page.add(MatplotlibChart(fig, expand=True))

    def path_plot(ax):
        course = pd.read_csv("introduction/data/course.csv", index_col=None)
        cx = course.x
        cy = course.y

        state = pd.read_csv("introduction/data/state.csv", index_col=None)
        x = state.sx
        y = state.sy
        v = state.sv
        time = state.time

        ax.plot(cx, cy, ".b", label="course")
        ax.plot(x, y, "-r", label="trajectory")
        ax.legend()
        ax.set_xlabel("x[m]")
        ax.set_ylabel("y[m]")
        ax.axis("equal")
        ax.grid(True)
        
        return ax

    if __name__ == '__main__':
        ft.app(target=main)
```

![](/img/flet_tutorial/image2.png)

æ™‚ç³»åˆ—ãƒ‡ãƒ¼ã‚¿ã¯ã€ä¸‹è¨˜ã‚’å‚ç…§ã—ã¦ä½œæˆã—ã¾ã—ãŸã€‚

https://myenigma.hatenablog.com/entry/2017/06/05/111007

ãƒ‡ãƒ¼ã‚¿ã®å½¢å¼ã¯æ¬¡ã®é€šã‚Š

:::details ãƒ‡ãƒ¼ã‚¿å½¢å¼

    ``` csv: course.csv
        x,y
        0,0
        -,-
        49.5,67.3
    ```

    x:ã‚³ãƒ¼ã‚¹å‚ç…§ç‚¹ã®xåº§æ¨™
    y:ã‚³ãƒ¼ã‚¹å‚ç…§ç‚¹ã®yåº§æ¨™

    ``` csv: course.csv
        time,sx,sy,sv,tx,ty
        0.0,-0.0,-3.0,0.0,0.0,0.0
        -,-,-,-,-,-
        38.8,48.8,65.3,2.8,49.5,67.3
    ```

    time: æ™‚é–“
    sx: è©²å½“æ™‚é–“ã«ãŠã‘ã‚‹è»Šä½“ã®xåº§æ¨™
    sy: è©²å½“æ™‚é–“ã«ãŠã‘ã‚‹è»Šä½“ã®yåº§æ¨™
    sv: è©²å½“æ™‚é–“ã«ãŠã‘ã‚‹è»Šä½“ã®é€Ÿåº¦
    tx: è©²å½“æ™‚é–“ã«ãŠã‘ã‚‹å‚ç…§ç‚¹ã®xåº§æ¨™
    ty: è©²å½“æ™‚é–“ã«ãŠã‘ã‚‹å‚ç…§ç‚¹ã®yåº§æ¨™

:::

### slider barã‚’ã¤ã‘ã‚‹

slider barã‚’ã¤ã‘ã¦ã¿ã¾ã—ãŸã€‚
ã“ã‚Œã§æ™‚é–“ã‚’æ“ä½œã™ã‚‹ã¤ã‚‚ã‚Šã€‚

``` code: flet_tutorial.py
    def main(page: ft.Page):

        fig = plt.figure()
        ax = fig.add_subplot(111)
        time = path_plot(ax)

        page.add(MatplotlibChart(fig, expand=True))

        def slider_changed(e):
            t.value = f"time {e.control.value}[sec]"
            page.update()

        unit_time = ((max(time)) - min(time))/len(time)
        print(min(time))
        print(max(time))
        print(len(time))
        print(unit_time)

        t = ft.Text()
        page.add(
            ft.Text("time"),
            ft.Slider(min=min(time), max=max(time), divisions=unit_time, label="{value}[sec]", on_change=slider_changed), t)
```

![](/img/flet_tutorial/image3.png)

### æ™‚é–“ã§æ›´æ–°

slider barã®æ›´æ–°ã«åˆã‚ã›ã¦æç”»ã‚’æ›´æ–°ã™ã‚‹ã€‚
